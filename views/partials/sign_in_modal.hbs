{{!-- 
======================================================
Assignment 2 - Responsive, Handlebars, Forms Processing and Email
Course:			WEB 322
Author:			David Ly
Email:			dly11@myseneca.ca
Date:			  2020-10-28
====================================================== 
--}}
<!-- ========== The Sign-IN Modal START ========== -->
<div class="modal" id="signInModal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-light">
      <!-- Modal Header -->
      <div class="modal-header border-0">
        <h4 class="modal-title ">Sign-In to your account:</h4>
        <button type="button" class="close" data-dismiss="modal"> &times; </button>
      </div>
      <!-- Modal body -->
      <!-- ////////// FORM START //////////////////// -->
      <!-- ////////// TEST: action="https://httpbin.org/post" -->
      <form class="needs-validation " id="signInForm" action="/sign-in-process" method="POST">
        <div class="modal-body ">
          <!-- ERROR MESSAGES -->
          <div class="form-group">
            <div class="invalid-feedback-myCustom">{{{validationMsgsSI}}}</div>
          </div>
          <div class="form-group">
            <input type="username" class="form-control" id="si-username" placeholder="Username" name="username" />
            <div class="invalid-feedback">Please correctly enter your username.</div>
          </div>
          <div class="form-group">
            <input type="password" class="form-control" id="si-password" placeholder="Password" name="password" />
            <div class="invalid-feedback">Please correctly enter your password.</div>
          </div>
        </div>
        <!-- Modal footer -->
        <div class="modal-footer border-0">
          <button type="submit" class="btn btn-success">Sign-In</button>
        </div>
      </form>
      <!-- ////////// FORM END ////////// -->
      <script>

        const signInForm = document.querySelector('#signInForm');

        signInForm.onsubmit = function ()
        {
          let status = true;

          clearMessagesOfInputIds(
            '#si-username',
            '#si-password'
          );

          // function to check for nulls
          function checkForNulls(...theArgs)
          {
            theArgs.forEach(field =>
            {
              if (field.value === "")
              {
                field.classList.add('is-invalid');
                status = false;     // THIS === reason that func is in this block
              }
            });
          }

          const username = document.querySelector('#si-username');
          const password = document.querySelector('#si-password');

          checkForNulls(
            username,
            password,
          );

          return status;
        };

        // function to clear status messages
        function clearMessagesOfInputIds(...theArgs)
        {
          theArgs.forEach(element =>
          {
            document.querySelector(element).classList.remove('is-invalid');
          });
        }

      </script>
    </div>
  </div>
</div>
<!-- ========== The Sign-IN Modal END ========== -->
